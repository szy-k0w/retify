(this.webpackJsonpretify=this.webpackJsonpretify||[]).push([[0],[,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(40),r=a.n(n),c=a(11),i=function(){var e=c.a.getAuth(),t=e.accessToken,a=e.tokenType;return"".concat(a," ").concat(t)},u=r.a.create({baseURL:"https://api.spotify.com"});u.interceptors.request.use((function(e){return e.headers={Authorization:i()},e}));t.default=u},,,,,function(e,t,a){"use strict";var n={client_id:"1bb9eb7f824b458bbb58657dbc1877ba",redirect_url:"http://localhost:3000/callback",response_type:"token",scope:["user-read-playback-state","user-modify-playback-state","streaming"].join(",")},r=n.client_id,c=n.redirect_url,i=n.response_type,u=n.scope,s=function(){for(var e={},t=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1),n=t.exec(a);n;)e[n[1]]=decodeURIComponent(n[2]),n=t.exec(a);return e},o=function(e){var t=e.access_token,a=e.token_type,n=e.expires_in;return!!(t&&a&&n)},l={createAuthUrl:function(){return"".concat("https://accounts.spotify.com/authorize","?client_id=").concat(r,"&redirect_uri=").concat(c,"&response_type=").concat(i,"&scope=").concat(u)},getAuth:function(){return{accessToken:window.localStorage.getItem("accessToken"),tokenType:window.localStorage.getItem("tokenType"),expiresIn:window.localStorage.getItem("expiresIn")}},logOut:function(){window.localStorage.clear()},handleAuthResponse:function(){var e=s();if(o(e)){var t=e.access_token,a=e.token_type,n=e.expires_in;window.localStorage.setItem("accessToken",t),window.localStorage.setItem("tokenType",a),window.localStorage.setItem("expiresIn",n)}}};t.a=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(102)},,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),i=a.n(c),u=a(16),s=(a(46),a(2)),o=a(11),l=(a(47),function(e){var t=e.handleAuth;return r.a.createElement("div",{className:"auth"},r.a.createElement("article",{className:"auth-card"},r.a.createElement("h1",{className:"auth-card__title"},"Log In with Spotify"),r.a.createElement("button",{className:"auth-card__btn",onClick:t},"Login")))});l.defaultProps={handleAuth:function(){}};var m=l,f=function(e){return r.a.createElement(m,{handleAuth:function(){window.location.href=o.a.createAuthUrl()}})},d=a(9),p=a(17),v=(a(52),function(){return r.a.createElement(d.a,{className:"loading-spinner",icon:p.b,spin:!0})}),h=(a(53),function(){return r.a.createElement("div",{className:"callback"},r.a.createElement(v,null))}),b=Object(s.h)((function(e){var t=e.history;return Object(n.useEffect)((function(){o.a.handleAuthResponse(),o.a.getAuth().accessToken?t.push("/client"):t.push("/auth")}),[t]),r.a.createElement(h,null)})),E=function(e){var t=function(t){return o.a.getAuth().accessToken?r.a.createElement(e,t):r.a.createElement(s.a,{to:"/auth"})};return t.displayName="withAuthValidation",t},y=a(1),g=a.n(y),k=a(3),w=a(5),x=Object(n.createContext)({isReady:!1,isPlaying:!1,currentTrack:null,contextUri:null,duration:0}),O=function(e){var t=e.children,a=o.a.getAuth().accessToken,c=Object(n.useState)(!1),i=Object(w.a)(c,2),u=i[0],s=i[1],l=Object(n.useState)(!1),m=Object(w.a)(l,2),f=m[0],d=m[1],p=Object(n.useState)(null),v=Object(w.a)(p,2),h=v[0],b=v[1],E=Object(n.useState)(null),y=Object(w.a)(E,2),O=y[0],j=y[1],_=Object(n.useState)(0),A=Object(w.a)(_,2),P=A[0],N=A[1],T=Object(n.useState)(0),S=Object(w.a)(T,2),I=S[0],R=S[1];Object(n.useEffect)((function(){a&&(window.onSpotifyWebPlaybackSDKReady=function(){var e=new window.Spotify.Player({name:"Retify",getOAuthToken:function(){var e=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});Object(k.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connect();case 2:if(t.sent){t.next=6;break}return console.log("Failed to connect."),t.abrupt("return");case 6:e.addListener("ready",(function(e){var t=e.device_id;console.log("Player is ready"),window.localStorage.setItem("deviceId",t),s(!0)})),e.addListener("player_state_changed",(function(e){var t=e.context,a=e.paused,n=e.track_window,r=e.duration,c=e.position,i=t.uri,u=n.current_track;d(!a),b(u),j(i),R(r),N(c)}));case 8:case"end":return t.stop()}}),t)})))()})}),[a]);var C={isReady:u,isPlaying:f,currentTrack:h,contextUri:O,duration:I,position:P};return r.a.createElement(x.Provider,{value:C},t)},j=(a(57),a(58),function(e){var t=e.children;return r.a.createElement("main",{className:"subpage-content"},t)}),_=a(6),A={getAlbum:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,Object(_.default)({method:"get",url:"/v1/albums/".concat(a)});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTracks:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.offset,r=void 0===n?0:n,e.next=3,Object(_.default)({method:"get",url:"/v1/albums/".concat(a,"/tracks"),params:{offset:r}});case 3:return c=e.sent,i=c.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=a(26),N=a(8),T=a.n(N),S=(a(75),function(e){var t=e.message,a=e.status;return r.a.createElement("div",{className:"error-card"},r.a.createElement("h3",{className:"error-card__title"},"Error"),a&&r.a.createElement("h4",{className:"error-card__status"},"Status: ",a),r.a.createElement("p",{className:"error-card__msg"},t))});S.defaultProps={message:"An error occured"};var I=S,R=(a(76),function(e){var t=e.isLoading,a=e.error,n=T()({"set-status":!0,"set-status--loading":t,"set-status--hide":!t&&!a});return r.a.createElement("footer",{className:n},function(){if(t)return r.a.createElement(v,null);if(a){if(a.isAxiosError){var e=a.response.data.error,n=e.message,c=e.status;return r.a.createElement(I,{message:n,status:c})}return r.a.createElement(I,{message:a.message})}}())}),C=(a(77),function(e){var t=e.children,a=e.variant,c=Object(n.useContext)(D),i=c.items,u=c.isLoading,s=c.error,o=c.itemRef,l=T()({"items-set-content":!0,"items-set-content--list":"list"===a,"items-set-content--grid":"grid"===a});return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:l},t(i,o)),r.a.createElement(R,{error:s,isLoading:u}))});C.defaultProps={children:function(){},variant:"grid"};var L=C,F=(a(78),function(e){var t=e.children,a=e.moreUrl;return r.a.createElement("header",{className:"items-set-header"},r.a.createElement("h2",{className:"items-set-header__title"},t),a&&r.a.createElement(u.b,{className:"items-set-header__more-url",to:a},"Show more"))}),U=function(e,t,a){var r=Object(n.useRef)();return[Object(n.useCallback)((function(n){e||(r.current&&r.current.disconnect(),r.current=new IntersectionObserver((function(e){e[0].isIntersecting&&t&&a()})),n&&r.current.observe(n))}),[e,t,a])]},D=Object(n.createContext)({items:[],isLoading:!0,error:null,itemRef:function(){}}),M=function(e){var t=e.children,a=e.handleFetch,c=Object(n.useState)([]),i=Object(w.a)(c,2),u=i[0],s=i[1],o=Object(n.useState)(!0),l=Object(w.a)(o,2),m=l[0],f=l[1],d=Object(n.useState)(!1),p=Object(w.a)(d,2),v=p[0],h=p[1],b=Object(n.useState)(null),E=Object(w.a)(b,2),y=E[0],x=E[1],O={offset:u.length,lastItem:u[u.length-1]},j=Object(n.useCallback)(Object(k.a)(g.a.mark((function e(){var t,n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v&&!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(!0),e.next=6,a(O);case 6:t=e.sent,n=t.items,r=t.hasMore,s((function(e){return[].concat(Object(P.a)(e),Object(P.a)(n))})),c=0!==n.length&&r,f(c),h(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),x(e.t0),h(!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),[v,y,a,O]),_=U(v,m,j),A=Object(w.a)(_,1)[0];Object(n.useEffect)((function(){0===u.length&&j()}),[u.length,j]);var N={items:u,isLoading:v,error:y,itemRef:A};return r.a.createElement(D.Provider,{value:N},r.a.createElement("section",{className:"items-set"},t))};M.Header=F,M.Content=L;var B=M,H=(a(79),a(80),function(e){var t=e.src,a=e.alt;return r.a.createElement("div",{className:"cover"},r.a.createElement("main",{className:"cover__content"},r.a.createElement("img",{className:"cover__img",src:t,alt:a})))});H.defaultProps={alt:"Cover"};var V=H,z=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.default)({method:"get",url:"/v1/me/player/devices"}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.position,e.next=3,Object(_.default)({method:"put",url:"/v1/me/player/seek",params:{device_id:window.localStorage.getItem("deviceId"),position_ms:a}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,n=void 0===a?20:a,e.next=3,Object(_.default)({method:"get",url:"/v1/me/player/recently-played",params:{limit:n}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.default)({method:"post",url:"/v1/me/player/next",params:{device_id:window.localStorage.getItem("deviceId")}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q={getDevices:z,seek:G,getRecentlyPlayedTracks:J,postPlayPrevious:function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.default)({method:"post",url:"/v1/me/player/previous",params:{device_id:window.localStorage.getItem("deviceId")}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),postPlayNext:W,putPlayByContext:function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.context_uri,e.prev=1,e.next=4,Object(_.default)({method:"put",url:"/v1/me/player/play",data:{context_uri:a},params:{device_id:window.localStorage.getItem("deviceId")}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),putPlayByUri:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uri,n=window.localStorage.getItem("deviceId"),console.log(n),e.next=6,Object(_.default)({method:"put",url:"/v1/me/player/play",data:{uris:[a]},params:{device_id:window.localStorage.getItem("deviceId")}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),putPlayDefault:function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.default)({method:"put",url:"/v1/me/player/play",params:{device_id:window.localStorage.getItem("deviceId")}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),putPause:function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.default)({method:"put",url:"/v1/me/player/pause",params:{device_id:window.localStorage.getItem("deviceId")}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},K=a(15),Q=(a(81),function(e){var t=e.id,a=e.uri,n=e.handleAction,c=e.isPlaying,i=e.isActive,u=T()({"track-control":!0,"track-control--active":i});return r.a.createElement("aside",{onClick:function(){return n({id:t,uri:a})},className:u},i&&c?r.a.createElement(d.a,{icon:K.b,className:"track-control__icon"}):r.a.createElement(d.a,{icon:K.c,className:"track-control__icon"}))});Q.defaultProps={id:"",handleAction:function(){},isPlaying:!1,isActive:!1};var X=Q,Y=(a(82),function(e){var t=e.artists;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t,a){var n=e.id,c=e.name;return r.a.createElement(u.b,{key:n,style:{color:"inherit",textDecoration:"inherit"},to:"/client/artist/".concat(n)},"".concat(c).concat(t!==a.length-1?", ":""))})))});Y.defaultProps={artists:[]};var Z=Y,$=function(e){var t=e.title,a=e.artists,n=e.isActive,c=T()({"track-description":!0,"track-description--active":n});return r.a.createElement("main",{className:c},r.a.createElement("h3",{className:"track-description__title"},t),r.a.createElement("h3",{className:"track-description__artists"},r.a.createElement(Z,{artists:a})))};$.defaultProps={title:"No track title found.",artists:[]};var ee=$,te=function(e){var t=new Date(e),a=t.getUTCMinutes(),n=t.getUTCSeconds()<10?"0".concat(t.getUTCSeconds()):t.getUTCSeconds();return"".concat(a,":").concat(n)},ae=(a(83),function(e){var t=e.duration;return r.a.createElement("aside",{className:"track-duration"},te(t))});ae.defaultProps={duration:0};var ne=ae,re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]?e[0].url:null;return t},ce=function(e){var t=function(t){var a=Object(n.useContext)(x);return r.a.createElement(e,Object.assign({},t,{webPlaybackValue:a}))};return t.displayName="withWebPlayback",t},ie=r.a.forwardRef((function(e,t){var a=e.track,n=e.webPlaybackValue,c=a.id,i=a.name,u=a.artists,s=a.album,o=a.duration_ms,l=a.uri,m=n.isPlaying,f=n.currentTrack,d=re(s&&s.images),p=(f?f.id:null)===c,v=function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id,a=t.uri,!p||!m){e.next=6;break}return e.next=4,q.putPause();case 4:e.next=8;break;case 6:return e.next=8,q.putPlayByUri({uri:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=T()({"track-item":!0,"track-item--no-cover":!d});return r.a.createElement("div",{className:h,ref:t},r.a.createElement(X,{id:c,uri:l,handleAction:v,isPlaying:m,isActive:p}),d&&r.a.createElement(V,{src:d,alt:"Track cover"}),r.a.createElement(ee,{title:i,artists:u,isActive:p}),r.a.createElement(ne,{duration:o}))}));ie.defaultProps={isActive:!1};var ue=ce(ie),se=function(e){var t=e.fetchTracks;return r.a.createElement(B,{handleFetch:t},r.a.createElement(B.Content,{variant:"list"},(function(e,t){return e.map((function(e){return r.a.createElement(ue,{key:e.id,track:e,ref:t})}))})))};se.defaultProps={fetchTrack:function(){}};var oe=se,le=function(e){var t=function(t){var a=Object(s.g)().id;return a?r.a.createElement(e,Object.assign({},t,{id:a})):r.a.createElement(s.a,{to:"/client/not-found"})};return t.displayName="withIdParameter",t},me=le((function(e){var t=e.id,a=function(){var e=Object(k.a)(g.a.mark((function e(a){var n,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.offset,e.next=3,A.getTracks({id:t,offset:n});case 3:return r=e.sent,c=r.items,i=r.next,e.abrupt("return",{items:c,hasMore:Boolean(i)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(oe,{fetchTracks:a})})),fe=(a(84),function(e){var t=e.children;return r.a.createElement("h4",{className:"header-type"},t)}),de=(a(85),function(e){var t=e.children;return r.a.createElement("h1",{className:"header-title"},t)}),pe=(a(86),function(e){var t=e.children;return r.a.createElement("footer",{className:"header-detail"},t)}),ve=(a(87),function(e){var t=e.children,a=e.isLoading,n=T()({"media-header":!0,"media-header--loading":a});return r.a.createElement("header",{className:n},a?r.a.createElement(v,null):t)});ve.Type=fe,ve.Title=de,ve.Detail=pe;var he=ve,be=function(e){var t=e.isLoading,a=e.album;return r.a.createElement(he,{isLoading:t},function(){if(!t){console.log(a);var e=a.name,n=a.type,c=a.images,i=a.release_date,u=re(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{src:u}),r.a.createElement(he.Type,null,n),r.a.createElement(he.Title,null,e),r.a.createElement(he.Detail,null,r.a.createElement(d.a,{icon:K.a})," ",i))}}())},Ee=le((function(e){var t=e.id,a=Object(n.useState)(null),c=Object(w.a)(a,2),i=c[0],u=c[1],s=Object(n.useState)(!0),o=Object(w.a)(s,2),l=o[0],m=o[1];return Object(n.useEffect)((function(){i||Object(k.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,A.getAlbum({id:t});case 4:a=e.sent,console.log(a),u(a),m(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),m(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[t,i,l]),r.a.createElement(be,{isLoading:l,album:i})})),ye=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,null),r.a.createElement(j,null,r.a.createElement(me,null)))},ge=a(6).default,ke={getArtist:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,ge({method:"get",url:"/v1/artists/".concat(a)});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTopTracks:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,ge({url:"/v1/artists/".concat(a,"/top-tracks"),params:{country:"PL"}});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAlbums:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c,i,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.offset,r=void 0===n?0:n,c=t.includeGroups,e.next=3,ge({url:"/v1/artists/".concat(a,"/albums"),params:{offset:r,include_groups:c}});case 3:return i=e.sent,u=i.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRealatedArtists:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.offset,r=void 0===n?0:n,e.next=3,ge({url:"/v1/artists/".concat(a,"/related-artists"),params:{offset:r}});case 3:return c=e.sent,i=c.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},we=function(e){var t=e.isLoading,a=e.artist;return r.a.createElement(he,{isLoading:t},function(){if(!t){var e=a.name,n=a.type,c=a.images,i=a.followers,u=re(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{src:u}),r.a.createElement(he.Type,null,n),r.a.createElement(he.Title,null,e),r.a.createElement(he.Detail,null,r.a.createElement(d.a,{icon:p.a})," ",i.total))}}())},xe=le((function(e){var t=e.id,a=Object(n.useState)(null),c=Object(w.a)(a,2),i=c[0],u=c[1],s=Object(n.useState)(!0),o=Object(w.a)(s,2),l=o[0],m=o[1];return Object(n.useEffect)((function(){Object(k.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,ke.getArtist({id:t});case 4:a=e.sent,u(a),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[t]),r.a.createElement(we,{isLoading:l,artist:i})})),Oe=(a(88),function(e){var t=e.children,a=e.to;return r.a.createElement(u.b,{className:"link",to:a},t)});Oe.defaultProps={to:""};var je=Oe,_e=(a(89),function(e){var t=e.children,a=e.direction,n=T()({navigation:!0,"navigation--row":"row"===a,"navigation--column":"column"===a});return r.a.createElement("nav",{className:n},t)});_e.defaultProps={direction:"column"},_e.Link=je;var Ae=_e,Pe=(a(90),function(e){var t=e.children,a=e.isPlaying,n=e.handleAction;return r.a.createElement("header",{className:"card-header"},r.a.createElement("div",{onClick:n,className:"card-header__icon-wrapper"},a?r.a.createElement(d.a,{className:"card-header__icon",icon:K.b}):r.a.createElement(d.a,{className:"card-header__icon",icon:K.c})),t)});Pe.defaultProps={isPlaying:!1,isActive:!1,handleAction:function(){}};var Ne=Pe,Te=(a(91),function(e){var t=e.children;return r.a.createElement("main",{className:"card-content"},t)}),Se=(a(92),function(e){var t=e.children,a=e.to,n=e.isActive,c=T()({"card-title":!0,"card-title--active":n});return r.a.createElement(u.b,{className:c,to:a},t)});Se.defaultProps={to:"",isActive:!1};var Ie=Se,Re=(a(93),function(e){var t=e.children;return r.a.createElement("h5",{className:"card-type"},t)}),Ce=(a(94),function(e){var t=e.children;return r.a.createElement("footer",{className:"card-description"},t)}),Le=(a(95),r.a.forwardRef((function(e,t){var a=e.children;return r.a.createElement("article",{className:"media-card",ref:t},a)})));Le.defaultProps={isActive:!1,handleAction:function(){},title:"Media Card",titleUrl:"",type:"No Type"},Le.Header=Ne,Le.Content=Te,Le.Title=Ie,Le.Type=Re,Le.Description=Ce;var Fe=Le,Ue=function(e){var t=e.artist,a=e.artistRef,n=e.handleAction,c=e.isActive,i=e.isPlaying,u=t.id,s=t.name,o=t.type,l=t.images,m=re(l);return r.a.createElement(Fe,{ref:a},r.a.createElement(Fe.Header,{isPlaying:i,handleAction:n},r.a.createElement(V,{src:m,alt:"Artist's Photo"})),r.a.createElement(Fe.Content,null,r.a.createElement(Fe.Title,{to:"/client/artist/".concat(u),isActive:c},s),r.a.createElement(Fe.Type,null,o)))},De=function(e){var t=e.artist,a=e.artistRef,n=e.webPlaybackValue,c=t.uri,i=n.isPlaying,u=n.contextUri,s=c===u,o=s&&i,l=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,q.putPause();case 3:e.next=7;break;case 5:return e.next=7,q.putPlayByContext({context_uri:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ue,{artist:t,artistRef:a,handleAction:l,isPlaying:o,isActive:s})};De.defaultProps={artistRef:function(){}};var Me=ce(De),Be=function(e){var t=e.title,a=e.fetchArtists,n=function(e,t){return e.map((function(e){return r.a.createElement(Me,{key:e.id,artist:e,artistRef:t})}))};return r.a.createElement(B,{handleFetch:a},r.a.createElement(B.Header,null,t),r.a.createElement(B.Content,{variant:"grid"},n))};Be.defaultProps={title:"Artists",fetchArtists:function(){}};var He=Be,Ve=function(e){var t=e.id,a=Object(n.useCallback)(function(){var e=Object(k.a)(g.a.mark((function e(a){var n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.offset,console.log("fetchRelatedArtists"),e.next=4,ke.getRealatedArtists({id:t,offset:n});case 4:return r=e.sent,c=r.artists,e.abrupt("return",{items:c,hasMore:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement(He,{fetchArtists:a,title:"Related Artists"})},ze=function(e){var t=e.album,a=e.albumRef,n=e.handleAction,c=e.isActive,i=e.isPlaying,u=t.id,s=t.name,o=t.type,l=t.images,m=t.artists,f=re(l);return r.a.createElement(Fe,{ref:a},r.a.createElement(Fe.Header,{isPlaying:i,handleAction:n},r.a.createElement(V,{src:f,alt:"Albums's Cover"})),r.a.createElement(Fe.Content,null,r.a.createElement(Fe.Title,{to:"/client/album/".concat(u),isActive:c},s),r.a.createElement(Fe.Type,null,o),r.a.createElement(Fe.Description,null,r.a.createElement(Z,{artists:m}))))},Ge=ce((function(e){var t=e.album,a=e.albumRef,n=e.webPlaybackValue,c=t.uri,i=n.isPlaying,u=n.contextUri,s=c===u,o=s&&i,l=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,q.putPause();case 3:e.next=7;break;case 5:return e.next=7,q.putPlayByContext({context_uri:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ze,{album:t,albumRef:a,handleAction:l,isPlaying:o,isActive:s})})),Je=function(e){var t=e.title,a=e.fetchAlbums,n=function(e,t){return e.map((function(e){return r.a.createElement(Ge,{key:e.id,album:e,albumRef:t})}))};return r.a.createElement(B,{handleFetch:a},r.a.createElement(B.Header,null,t),r.a.createElement(B.Content,{variant:"grid"},n))};Je.defaultProps={title:"Albums",fetchAlbums:function(){}};var We=Je,qe=function(e){var t=e.id,a=Object(n.useCallback)(Object(k.a)(g.a.mark((function e(){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.getTopTracks({id:t});case 2:return a=e.sent,n=a.tracks,e.abrupt("return",{items:n,hasMore:!1});case 5:case"end":return e.stop()}}),e)}))),[t]),c=Object(n.useCallback)(function(){var e=Object(k.a)(g.a.mark((function e(a){var n,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.offset,e.next=3,ke.getAlbums({id:t,offset:n,includeGroups:"album"});case 3:return r=e.sent,c=r.items,i=r.next,e.abrupt("return",{items:c,hasMore:Boolean(i)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),i=function(e){return e.map((function(e){return r.a.createElement(ue,{key:e.id,track:e})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{handleFetch:a},r.a.createElement(B.Header,null,"Top tracks"),r.a.createElement(B.Content,{variant:"list"},i)),r.a.createElement(We,{title:"Albums",fetchAlbums:c}))},Ke=le((function(e){var t=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,null),r.a.createElement(j,null,r.a.createElement(Ae,{direction:"row"},r.a.createElement(Ae.Link,{to:"/client/artist/".concat(t,"/review")},"Review"),r.a.createElement(Ae.Link,{to:"/client/artist/".concat(t,"/related-artists")},"Related Artists")),r.a.createElement(s.d,{key:t},r.a.createElement(s.b,{path:"/client/artist/".concat(t,"/review")},r.a.createElement(qe,{id:t})),r.a.createElement(s.b,{path:"/client/artist/".concat(t,"/related-artists")},r.a.createElement(Ve,{id:t})),r.a.createElement(s.b,null,r.a.createElement(s.a,{to:"/client/artist/".concat(t,"/review")})))))})),Qe=(a(96),Object(s.h)((function(e){var t=e.history;return r.a.createElement("header",{className:"client-header"},r.a.createElement(s.b,{path:"/client/library"},r.a.createElement(Ae,{direction:"row"},r.a.createElement(Ae.Link,{to:"/client/library/artists"},"Artists"),r.a.createElement(Ae.Link,{to:"/client/library/albums"},"Albums"))),r.a.createElement("div",{className:"log-out-wrapper"},r.a.createElement("button",{className:"log-out-wrapper__btn",onClick:function(){o.a.logOut(),t.push("/auth")}},"Log Out")))}))),Xe=(a(97),function(){return r.a.createElement("aside",{className:"client-sidebar"},r.a.createElement(Ae,{direction:"column"},r.a.createElement(Ae.Link,{to:"/client/home"},"Home"),r.a.createElement(Ae.Link,{to:"/client/library"},"Library")))}),Ye=function(e){var t=e.fetchRecentlyPlayed,a=e.fetchTopArtists,n=function(e){return e.map((function(e){return r.a.createElement(ue,{key:e.id,track:e})}))};return r.a.createElement(j,null,r.a.createElement(B,{handleFetch:t},r.a.createElement(B.Header,null,"Recently Played"),r.a.createElement(B.Content,{variant:"list"},n)),r.a.createElement(He,{title:"Top Artists",fetchArtists:a}))},Ze={getTopArtists:function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.offset,n=void 0===a?0:a,e.next=3,Object(_.default)({url:"/v1/me/top/artists",params:{offset:n}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$e=function(e){var t=function(){var e=Object(k.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getRecentlyPlayedTracks({limit:5});case 2:return t=e.sent,a=t.items,e.abrupt("return",{items:a.map((function(e){return e.track})),hasMore:!1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.offset,e.next=3,Ze.getTopArtists({offset:a});case 3:return n=e.sent,r=n.items,c=n.next,e.abrupt("return",{items:r,hasMore:Boolean(c)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ye,{fetchRecentlyPlayed:t,fetchTopArtists:a})},et={getSavedAlbums:function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.offset,e.next=3,Object(_.default)({url:"/v1/me/albums",params:{offset:a}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tt=function(e){var t=e.fetchFollowedArtists,a=e.fetchSavedAlbums;return r.a.createElement(j,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/client/library/artists"},r.a.createElement(He,{fetchArtists:t})),r.a.createElement(s.b,{path:"/client/library/albums"},r.a.createElement(We,{fetchAlbums:a})),r.a.createElement(s.b,null,r.a.createElement(s.a,{to:"/client/library/artists"}))))},at={getFollowedArtists:function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.after,e.next=3,Object(_.default)({url:"/v1/me/following",params:{type:"artist",after:a}}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},nt=function(e){var t=function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lastItem,e.next=3,at.getFollowedArtists({after:a?a.id:null});case 3:return n=e.sent,r=n.artists,c=r.items,i=r.next,e.abrupt("return",{items:c,hasMore:Boolean(i)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(k.a)(g.a.mark((function e(t){var a,n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.offset,e.next=3,et.getSavedAlbums({offset:a});case 3:return n=e.sent,r=n.items,c=n.next,e.abrupt("return",{items:r.map((function(e){return e.album})),hasMore:Boolean(c)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(tt,{fetchFollowedArtists:t,fetchSavedAlbums:a})},rt=(a(98),function(e){var t=e.isPlaying,a=e.position,n=e.duration,c=e.handlePlayPrevious,i=e.handleAction,u=e.handleSeek,s=e.handlePlayNext;return r.a.createElement("main",{className:"music-control"},r.a.createElement("div",{className:"action-buttons"},r.a.createElement(d.a,{className:"action-buttons__aside-icon",icon:p.c,onClick:c}),r.a.createElement(d.a,{className:"action-buttons__main-icon",icon:t?K.b:K.c,onClick:i}),r.a.createElement(d.a,{className:"action-buttons__aside-icon",icon:p.d,onClick:s})),r.a.createElement("div",{className:"progress-bar-wrapper"},r.a.createElement("p",{className:"progress-bar-wrapper__duration"},te(a)),r.a.createElement("input",{className:"progress-bar-wrapper__bar",onDragEnd:u,type:"range",value:a,step:1,min:0,max:n}),r.a.createElement("p",{className:"progress-bar-wrapper__duration"},te(n))))}),ct=ce((function(e){var t=e.webPlaybackValue,a=t.isPlaying,c=t.isReady,i=t.duration,u=t.position,s=Object(n.useState)(u),o=Object(w.a)(s,2),l=o[0],m=o[1],f=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:if(!a){e.next=7;break}return e.next=5,q.putPause();case 5:e.next=9;break;case 7:return e.next=9,q.putPlayDefault();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(k.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,e.next=3,q.seek({position:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m(u)}),[u]),Object(n.useEffect)((function(){var e=null;return a?e=setInterval((function(){m((function(e){return e+1e3}))}),1e3):a||0===l||clearInterval(e),function(){return clearInterval(e)}}),[a,l]),r.a.createElement(rt,{position:l,duration:i,isPlaying:a&&c,handleAction:f,handleSeek:d,handlePlayPrevious:q.postPlayPrevious,handlePlayNext:q.postPlayNext})})),it=(a(99),function(e){var t=e.currentTrack,a=t.album,n=t.artists,c=t.name,i=re(a.images);return r.a.createElement("aside",{className:"track-info"},r.a.createElement("img",{className:"track-info__cover",src:i,alt:"Current track cover"}),r.a.createElement("main",{className:"track-details"},r.a.createElement("h5",{className:"track-details__name"},c),r.a.createElement("footer",{className:"track-details__artists"},n.map((function(e){return e.name})).join(", "))))}),ut=(a(100),function(e){var t=e.isReady,a=e.currentTrack,n=T()({player:!0,"player--loading":!t});return r.a.createElement("footer",{className:n},t?r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(it,{currentTrack:a}),r.a.createElement(ct,null)):r.a.createElement(v,null))}),st=ce((function(e){var t=e.webPlaybackValue,a=t.isReady,n=t.currentTrack;return r.a.createElement(ut,{isReady:a,currentTrack:n})})),ot=function(){return r.a.createElement("div",{className:"client"},r.a.createElement(Qe,null),r.a.createElement(Xe,null),r.a.createElement("main",{className:"client__content"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/client/home",component:$e}),r.a.createElement(s.b,{path:"/client/library",component:nt}),r.a.createElement(s.b,{path:"/client/album/:id",component:ye}),r.a.createElement(s.b,{path:"/client/artist/:id",component:Ke}),r.a.createElement(s.b,null,r.a.createElement(s.a,{to:"/client/home"})))),r.a.createElement(st,null))},lt=E((function(e){return r.a.createElement(O,null,r.a.createElement(ot,null))})),mt=function(e){return r.a.createElement("div",{className:"app"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/auth",component:f}),r.a.createElement(s.b,{path:"/callback",component:b}),r.a.createElement(s.b,{path:"/client",component:lt}),r.a.createElement(s.b,null,r.a.createElement(s.a,{to:"/client"}))))};a(101);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,null,r.a.createElement(mt,null))),document.getElementById("root"))}],[[41,1,2]]]);
//# sourceMappingURL=main.294ce64f.chunk.js.map